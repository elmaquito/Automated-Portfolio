name: ğŸ” Check Deployment Prerequisites

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  check-secrets:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“‹ Check required secrets
      run: |
        echo "ğŸ” Checking deployment prerequisites..."
        
        if [ -z "${{ secrets.FTP_PASSWORD }}" ]; then
          echo "âŒ FTP_PASSWORD secret is not configured"
          echo "ğŸ’¡ Please add FTP_PASSWORD secret in repository settings"
          echo "ğŸ”— Go to: https://github.com/${{ github.repository }}/settings/secrets/actions"
          exit 1
        else
          echo "âœ… FTP_PASSWORD secret is configured"
        fi
        
        echo "âœ… All prerequisites met for deployment"

  deploy-info:
    needs: check-secrets
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“Š Deployment Information
      run: |
        echo "ğŸš€ Deployment Configuration:"
        echo "ğŸ“ FTP Server: ftp.cluster021.hosting.ovh.net"
        echo "ğŸ‘¤ Username: martisx"
        echo "ğŸ“‚ Target Directory: /www/"
        echo "ğŸŒ Website URL: https://www.martinezismael.fr"
        echo ""
        echo "ğŸ”§ Next steps if deployment fails:"
        echo "1. Ensure FTP_PASSWORD secret is configured"
        echo "2. Verify OVH hosting is active"
        echo "3. Check FTP credentials are correct"