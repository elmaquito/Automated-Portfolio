name: 🔍 Check Deployment Prerequisites

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  check-secrets:
    runs-on: ubuntu-latest
    
    steps:
    - name: 📋 Check required secrets
      run: |
        echo "🔍 Checking deployment prerequisites..."
        
        if [ -z "${{ secrets.FTP_PASSWORD }}" ]; then
          echo "❌ FTP_PASSWORD secret is not configured"
          echo "💡 Please add FTP_PASSWORD secret in repository settings"
          echo "🔗 Go to: https://github.com/${{ github.repository }}/settings/secrets/actions"
          exit 1
        else
          echo "✅ FTP_PASSWORD secret is configured"
        fi
        
        echo "✅ All prerequisites met for deployment"

  deploy-info:
    needs: check-secrets
    runs-on: ubuntu-latest
    
    steps:
    - name: 📊 Deployment Information
      run: |
        echo "🚀 Deployment Configuration:"
        echo "📍 FTP Server: ftp.cluster021.hosting.ovh.net"
        echo "👤 Username: martisx"
        echo "📂 Target Directory: /www/"
        echo "🌐 Website URL: https://www.martinezismael.fr"
        echo ""
        echo "🔧 Next steps if deployment fails:"
        echo "1. Ensure FTP_PASSWORD secret is configured"
        echo "2. Verify OVH hosting is active"
        echo "3. Check FTP credentials are correct"